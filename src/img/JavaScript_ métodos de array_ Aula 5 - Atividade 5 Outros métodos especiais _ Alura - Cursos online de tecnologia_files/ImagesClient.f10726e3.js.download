"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var ImagesClient=function(){function r(e,t,n,o){_classCallCheck(this,r),this._apiEndpoint=e,this._apiEnvieToken=t,this._apiEnvieId=n,this._apiUserId=o}return _createClass(r,[{key:"upload",value:function(i,a){var s=this;return new Promise(function(t,n){var o={status:!1,paths:[],code:"",message:""},e=new FormData,r=(e.append("image",i),e.append("envie_id",s._apiEnvieId),e.append("gnarus_user_id",s._apiUserId),"Bearer "+s._apiEnvieToken);$.ajax({url:s._apiEndpoint,type:"POST",crossDomain:!0,data:e,dataType:"json",contentType:!1,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization",r)},xhr:function(){var e;return(e=$.ajaxSettings.xhr()).upload&&(e.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total*100,a)&&a.addProgress(i.name,e)},!1),e.upload.addEventListener("load",function(e){a&&a.finish(i.name)})),e}}).done(function(e){o.status=!0,o.paths=e.data.paths,o.code=e.code,o.message=e.message,t(o)}).fail(function(e){e.responseJSON.code&&(o.code=e.responseJSON.code),e.responseJSON.message&&(o.message=e.responseJSON.message),n(o)})})}}]),r}();