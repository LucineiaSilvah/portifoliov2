"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var Task=function(){function o(t){var e=t.data("task-id");t.data("author-id");return{taskId:e}}function s(){var t=$(".task-feedback"),e=$("#task-content .task-actions"),n=$(".markdownEditor, .openQuestion-answer-title");$(".task-actions").show(),0<t.length&&(e.addClass("screenReader-only"),$(".screenReader-only .task-actions-button-forum").hide(),0<n.length&&n.hide(),t.addClass("task-feedback--visible"),t.attr("aria-hidden","false"),sticky)&&sticky.recalc(),a()}function r(t,e,n){var a=document.open("text/html","replace");a.write(t.responseText),a.close()}function a(){var t=$(".task-body-actions-button.task-actions-button-answer");t.removeClass("task-actions-button-spinning"),t.prop("disabled",!1)}function c(){$(".choiceable-opinion").css("display","block")}var l=$(".task"),u=l.data("task-type"),d=l.data("course-code"),p=l.data("section-number");function m(t){return t.split(new RegExp("[`'‘’]")).join("'")}return{submitAnswer:function(t,e){l.data("hasfeedbackanswer")||((a=$(".task-body-actions-button.task-actions-button-answer")).addClass("task-actions-button-spinning"),a.prop("disabled",!0));var n=o(l),a=$(".repetition"),i=(a[0]&&(u=a.data("repeatable-type"),d=l.data("course-code"),p=l.data("section-number"),(n=o(a)).fromRepetition=!0),n.alternatives=[],"singlechoice"==u?(i=$(".alternativeList-item-input:checked"),n.alternatives.push(i.attr("id")),c()):"multiplechoice"==u?(n.alternatives=[],$(".alternativeList-item-input:checked").each(function(t){n.alternatives.push($(this).attr("id"))}),c()):"openquestion"==u?(n.answeredText=$(".markdownEditor-textArea").val(),n.answeredTextHighlight=$("input[name='answeredTextHighlight']").val()):"fillintheblank"==u?(i=$(".phrase-input").val(),n.answeredText=m(i.trim())):"speakingpractice"==u||"pronunciationpractice"==u?n.feedback=e:"projectsubmit"==u||"bootcampprojectsubmit"==u?n.projectUrl=e:"sortblocks"==u?n.blocksOrder=e:"linksubmit"==u&&(n.linkUrl=e),l.data("url-prefix"));$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:i+"course/"+d+"/section/"+p+"/"+u+"/answer",data:JSON.stringify(n),dataType:"json",success:t||s,statusCode:{200:t||s,400:t||s,403:t||s,500:r}}).always(function(){return Task.canShowSubmitExam()})},showOpinionIfAvailable:s,toggleChoiceableOpinion:c,enableButton:a,isExam:function(){return l.data("task-section-exam")},allowAnswer:function(){return l.data("allow-answer")},canShowSubmitExam:function(){var t,e,n,a,i,o,s;Task.isExam()&&(t=$(".task"),e=t.data("url-prefix"),n=$(".task-actions-button-complete"),a=t.data("course-code"),i=t.data("task-id"),o=t.data("section-id"),s=t.data("section-name"),$.get(e+"course/"+a+"/task/"+i+"/show/submit/exam",function(t){JSON.parse(t)&&0==n.length&&((t=$("<a>")).attr("href",e+"course/"+a+"/section/"+o+"/exam/complete"),t.addClass("task-actions-button task-body-actions-button task-actions-button-complete"),t.text("Submeter a "+s),0<$(".task-actions .container a").length?$(".task-actions .container a").before(t):$(".task-actions .container").append(t))}))},answerWithCorrectApostrophe:m}}(),Choiceable=function(){function t(){Task.isExam()||($(".alternativeList-item-opinionButton").each(function(){var t=$(this)[0];t.classList.contains("alternativeList-item-opinionButton--visible")||t.classList.add("alternativeList-item-opinionButton--visible")}),$(".task-actions").css("display","block"),$(".task-actions-button-next").css("display","inline-block"),sticky.recalc())}function e(){Task.isExam()&&Task.allowAnswer()||($(".alternativeList-item-input").each(function(){$(this).attr("disabled","true")}),$(".alternativeList-item-span").addClass("alternativeList-item-span-disabled"))}return _defineProperty({setup:function(){$(".alternativeList-item-opinionButton").on("click",function(t){t.preventDefault(),$(this).parents("li").toggleClass("alternativeList-item--active"),Aria.expandingButton($(this))}),Task.isExam()&&!Task.allowAnswer()&&e()},updateSubmitAnswerIf:function(t){Task.isExam()||t&&$("#task-content").attr("data-should-submit-answer",!1)},isChecked:function(t){return t.hasClass("alternativeList-item--checked")},isOpinionIcon:function(t){return t.target.classList.contains("alternativeList-item-opinionIcon-use")||t.target.classList.contains("alternativeList-item-opinionIcon")},showAlternativeOpinionsAndNextButton:t,toggleLabelClass:function(t){t.toggleClass("alternativeList-item--checked")},showAlternativeOpinions:function(){Task.isExam()||($(".alternativeList-item--checked").each(function(){var t,e=$(this);0<e.find(".alternativeList-item-opinionIcon").length&&(e.addClass("alternativeList-item--active"),t=e.find(".alternativeList-item-opinionButton"),Aria.expandingButton(t)),e.data("correct")?$(".singleChoice-alternative-aria-feedback").text("Alternativa correta"):$(".singleChoice-alternative-aria-feedback").text("Alternativa incorreta")}),sticky.recalc())},disableAllAlternatives:e},"showAlternativeOpinionsAndNextButton",t)}(),sticky=(!function(){var a=$(".task"),e=a.data("domain"),i=$(".openMenu-button"),n=!1,o=!1,s=$(".task-container-flex"),r=$(".task-group-border"),c=$(".task-body");function l(){var t="gnarus.menuClosed="+a.hasClass("menu--inactive")+"; path=/; domain="+e;document.cookie=t}$(".task-menu-button, .task-body-button").on("click",function(t){t.stopPropagation(),a.toggleClass("menu--inactive"),s.toggleClass("--task-button-column"),c.hasClass("chatbot-open")&&(c.removeClass("chatbot-open"),c.css("margin-right","auto")),r.toggleClass("--task-closed-border"),i.toggleClass("openMenu-button--inactive");var e="Abrir menu",n="Fechar menu";i.hasClass("openMenu-button--inactive")?i.each(function(){$(this).attr("aria-label",e),$(this).attr("title",e)}):i.each(function(){$(this).attr("aria-label",n),$(this).attr("title",n)}),l(),sticky.recalc()}),$(".task-submit").on("click",function(t){$(".task-body-main").data("should-warn")&&n&&!o&&0==window.confirm("Suas alterações ainda não foram salvas, clique em Responder para salvá-las. Deseja ir para a próxima aula?")&&t.preventDefault()}),$(".markdownEditor-textArea, .phrase-input").on("change",function(){n=!0}),$(".task-actions-button-answer").on("click",function(){o=!0}),$(document).click(function(t){$(window).width()<768&&($(t.target).closest(".task-menu-button").length||$(t.target).closest(".task-menu").length||$(t.target).closest(".settings-box").length||(a.addClass("menu--inactive"),i.addClass("task-menu-button--inactive"),l()))}),$(window).on("load",function(){Task.isExam()?$("#task-content").attr("data-should-submit-answer",!0):0<$(".alternativeList-item--checked").length&&(Task.toggleChoiceableOpinion(),Choiceable.showAlternativeOpinions(),Choiceable.showAlternativeOpinionsAndNextButton())}),$(".task-actions-button-answer").on("click",function(){$(this).attr("aria-expanded","true")}),$("[data-submittable=true]").on("click",function(){Task.submitAnswer()}),$(".task-actions-button-showOpinion").on("click",function(){Task.showOpinionIfAvailable()}),new ProjectSubmit(Task).initialize(),new LinkSubmit(Task).initialize()}(),function(){var i,o,s,r,c,l=document.querySelector(".task-menu"),u=document.querySelector(".task-body");return("scrollY"in window||"pageYOffset"in window)&&"requestAnimationFrame"in window?(window.addEventListener("resize",t),setTimeout(t,0),setTimeout(t,200),r=window.scrollY||window.pageYOffset,c=0,requestAnimationFrame(function t(){var e,n,a;l&&(e=u.classList.contains("chatbot-open"),(s<i||window.innerWidth<=691)&&!e?l.style.position="absolute":(l.style.position="fixed",a=window.scrollY||window.pageYOffset,r==a||a<0||document.documentElement.offsetHeight-o<a||(n=Math.max(Math.min(c+a-r,i-o),0),isNaN(n))||(n==c||e||(l.style.transform="translateY("+-n+"px)",c=n),r=a)),requestAnimationFrame(t))}),{recalc:t}):void(l.style.position="absolute");function t(){l&&(i=l.getBoundingClientRect().height,o=window.innerHeight,s=u.getBoundingClientRect().height)}}());